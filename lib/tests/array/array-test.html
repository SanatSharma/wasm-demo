<html>
<body>
  <table>
    <tr><td>Javascript:</td><td><span id='js'>0</span></td></td>
    <tr><td>AssemblyScript-wasm:</td><td><span id='assemblyscript'>0</span></td></td>
    <tr><td>C-wasm:</td><td><span id='c'>0</span></td></td>
  </table>
  <script>
    'use strict';

    const total = [ 0, 0, 0, 0 ];
    const solved = [ 0, 0, 0, 0 ];

    const out = [
        document.getElementById('js'),
        document.getElementById('assemblyscript'),
        document.getElementById('c'),        
    ];

    function update(index, time) {
        total[index] += event.data;
        solved[index]++;
        out[index].textContent = (((total[index] / solved[index]) * 100) >>> 0) / 100;
    }

    const jsWorker = new Worker('js-array-worker.js');
    jsWorker.addEventListener('message', event => {
        const t = event.data;
        console.log(`JS: ${t}`);
        update(0, t);
    });

    const wasmWorker = new Worker('assemblyscript-worker.js');
    wasmWorker.addEventListener('message', event => {
        const t = event.data;
        console.log(`AssemblyScript: ${t}`);
        update(1, t);
    });


    const wasm2dWorker = new Worker('c-worker.js');
    wasm2dWorker.addEventListener('message', event => {
        const t = event.data;
        console.log(`C : ${t}`);
        update(2, t);
    });
   
  </script>
</body>
</html>
