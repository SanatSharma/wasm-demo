<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
<style>
canvas {
    border: 1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
<body>
​
<p id="demo"></p>
<table id = "board">
  <!--<colgroup><col><col><col>
  <colgroup><col><col><col>
  <colgroup><col><col><col>
  <tbody>
   <tr>  <td>9 <td>  <td>  <td>2 <td>  <td>  <td>  <td>5 <td>
   <tr>  <td>6 <td>  <td>  <td>  <td>5 <td>  <td>  <td>4 <td>
   <tr>  <td>  <td>2 <td>  <td>4 <td>  <td>  <td>3 <td>  <td>
  <tbody>
   <tr>  <td>  <td>  <td>8 <td>  <td>  <td>  <td>  <td>  <td>
   <tr>  <td>  <td>  <td>  <td>5 <td>  <td>9 <td>  <td>6 <td>
   <tr>  <td>  <td>  <td>  <td>  <td>  <td>  <td>4 <td>  <td>1
  <tbody>
   <tr>  <td>  <td>1  <td>  <td>  <td>  <td>5 <td>  <td>8 <td>
   <tr>  <td>  <td>9  <td>  <td>  <td>7 <td>  <td>  <td>  <td>4
   <tr>  <td>  <td>8  <td>2 <td>  <td>4 <td>  <td>  <td>  <td>-->
</table>

<button type=button style="margin-top:50px; margin-left:44%; font-size:30px" onclick="startGame()">Solve Sudoku</button>

<script>

var table = new Array(9);

function startGame() {
    var i = 0;
    var j = 0;
    for (i = 0; i < 9; i++) {
        table[i] = new Array(9);
        for (j = 0; j < 9; j++) {
            table[i][j] = new component("50px", "50px", "black", i*50, j*50);
        }
    }
    myGameArea.start();
}

var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 500;
        this.canvas.height = 500;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 200);
    },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}

function component(width, height, color, x, y) {
    this.text = 0;
    this.width = width;
    this.height = height;  
    this.x = x;
    this.y = y;    
    this.update = function() {
        ctx = myGameArea.context;

            ctx.font = this.width + " " + this.height;
            ctx.fillStyle = color;
            ctx.fillText(this.text, this.x, this.y);
        
    }
}
var count = 0;
function updateGameArea() {
    count ++;
    myGameArea.clear();
    var i = 0;
    var j = 0;
    for (i = 0; i < 9; i++) {
        for (j = 0; j < 9; j++) {
                
                table[i][j].text = count++;
                table[i][j].update();
        }
    }
}



console.time("Execution time");
"use strict";
var model = new Array(9);
var modelLength = 9;
var counter=0;
function initBoard() {
    startGame();
    var i = 0;
    var j = 0;
    for (i = 0; i < modelLength; i++) {
        model[i] = new Array(9);
        for (j = 0; j < modelLength; j++) {
            model[i][j] = 0;
        }
    }
    // Create the initial board
    model[0][0] = 9;
    model[0][3] = 2;
    model[0][7] = 5;
    model[1][0] = 6;
    model[1][4] = 5;
    model[1][7] = 4;
    model[2][1] = 2;
    model[2][3] = 4;
    model[2][6] = 3;
    model[3][2] = 8;
    model[4][3] = 5;
    model[4][5] = 9;
    model[4][7] = 6;
    model[5][6] = 4;
    model[5][8] = 1;
    model[6][1] = 1;
    model[6][5] = 5;
    model[6][7] = 8;
    model[7][1] = 9;
    model[7][4] = 7;
    model[7][8] = 4;
    model[8][1] = 8;
    model[8][2] = 2;
    model[8][4] = 4;
}
function getElement(row, col) {
    return model[row][col];
}
function main() {
    initBoard();
    
    solve(0, 0, 0);
    console.log("Solved");
    console.timeEnd("Execution time");
    console.log(model);

}
function solve(row, col, sum) {
    if (row > 8) {
        // finished computing the board
     //  console.timeEnd("Execution time");
  
//        throw new Error();
        updateGameArea();
         return 1;
        
    }
    if (model[row][col] != 0) {
        //nextElem (row, col, sum);
        if (col < 8) {
            // can go to next element in column
            sum = solve(row, col + 1, sum);
        }
        else {
            // reached the end of the row. Move on to the next row
            sum = solve(row + 1, 0, sum);
        }
    }
    else {
        for (var i = 1; i <= 9; i++) {
            if (checkRow(row, i) && checkCol(col, i) && checkBox(row, col, i)) {
                
                model[row][col] = i;
                if(col == 5 && row == 2){
                    updateGameArea();
                    
                }
                //    nextElem (row, col, sum);
                if (col < 8) {
                    // can go to next element in column
                    sum = solve(row, col + 1, sum);
                }
                else {
                    // reached the end of the row. Move on to the next row
                    sum = solve(row + 1, 0, sum);
                }
            }
        }
        model[row][col] = 0;
    }
    return sum;
}
function nextElem(row, col, sum) {
    if (col < 8) {
        // can go to next element in column
        solve(row, col + 1, sum);
    }
    else {
        // reached the end of the row. Move on to the next row
        solve(row + 1, 0, sum);
    }
}
// return number instead of boolean to work with AssemblyScript
// checks if the element is present in the row
function checkRow(row, value) {
    for (var i = 0; i < modelLength; i++) {
        if (value == model[row][i])
            return 0;
    }
    return 1;
}
// checks if the element is present in the column
function checkCol(col, value) {
    for (var i = 0; i < modelLength; i++) {
        if (value == model[i][col])
            return 0;
    }
    return 1;
}
// checks if the element is present in the box
function checkBox(row, col, value) {
    // Need to floor to get integer value
    row = Math.floor(row / 3) * 3;
    col = Math.floor(col / 3) * 3;
    for (var i = 0; i < 3; i++) {
        for (var j = 0; j < 3; j++) {
            if (model[row + i][col + j] == value)
                return 0;
        }
    }
    return 1;
}

function updateGUI(){
    for(var i=0; i <modelLength; i++){
        for(var j=0; j<modelLength;j++){
            document.getElementById("board").rows[0].cells[j].innerHTML = model[i][j];
        }
    }
}

</script>
​
</body>
</html>
​

